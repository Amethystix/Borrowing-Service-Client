{"version":3,"sources":["webpack:///./src/views/Listing.vue?7946","webpack:///./src/views/Listing.vue?1dbd","webpack:///./src/views/Listing.vue?dc6a","webpack:///./src/views/Listing.vue?154a","webpack:///./src/views/Listing.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_style_resources_loader_lib_index_js_ref_8_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Listing_vue_vue_type_style_index_0_id_7bb49081_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_style_resources_loader_lib_index_js_ref_8_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Listing_vue_vue_type_style_index_0_id_7bb49081_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","attrs","id","isLoading","_e","staticClass","_v","_s","listingObj","name","ownerUsername","zipCode","_m","description","btnId","btnClass","spinning","isBorrowing","btnLabel","isReserved","isDisabled","on","buttonClick","$event","borrow","listingExists","staticRenderFns","Listingvue_type_script_lang_ts_Listing","_Vue","Listing","_this","Object","classCallCheck","borrowError","inherits","createClass","key","value","_this2","axios_default","a","get","$route","params","then","res","data","_res$data","ownerId","catch","err","finally","_this3","_res$data2","_this4","payload","itemId","headers","Authorization","$cookies","post","console","log","vue_property_decorator","tslib_es6","components","LButton","Listingvue_type_script_lang_ts_","views_Listingvue_type_script_lang_ts_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-5907760c.f809553b.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Listing.vue?vue&type=style&index=0&id=7bb49081&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Listing.vue?vue&type=style&index=0&id=7bb49081&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"listing\"}},[(!_vm.isLoading)?_c('div',{staticClass:\"container\"},[(_vm.listingExists)?_c('div',{staticClass:\"listing-container\"},[_c('div',{staticClass:\"page-title\"},[_vm._v(\"\\n          \"+_vm._s(_vm.listingObj.name)+\"\\n        \")]),_c('div',{staticClass:\"user-text\"},[_vm._v(\"\\n          Posted by \"+_vm._s(_vm.listingObj.ownerUsername)+\" located at \"+_vm._s(_vm.listingObj.zipCode)+\"\\n        \")]),_c('div',{staticClass:\"col-container\"},[_vm._m(0),_c('div',{staticClass:\"item-description col-2 page-text\"},[_vm._v(\"\\n            \"+_vm._s(_vm.listingObj.description)+\"\\n          \")])]),_c('div',{staticClass:\"btn-wrapper\"},[_c('LButton',{attrs:{\"btnId\":\"borrow\",\"btnClass\":\"primary\",\"spinning\":_vm.isBorrowing,\"btnLabel\":_vm.listingObj.isReserved ? 'Currently unavailable' : 'Request to borrow',\"isDisabled\":_vm.listingObj.isReserved || _vm.isBorrowing},on:{\"buttonClick\":function($event){_vm.borrow()}}}),(_vm.borrowError)?_c('div',{staticClass:\"error-msg\"},[_vm._v(\"\\n            This item cannot be borrowed at this time.\\n          \")]):_vm._e()],1)]):_vm._e(),(!_vm.listingExists)?_c('div',{staticClass:\"listing-container\"},[_c('div',{staticClass:\"page-title\"},[_vm._v(\"\\n          404 Not Found\\n        \")]),_c('div',{staticClass:\"page-text not-found\"},[_vm._v(\"\\n            Sorry, but we couldn't find the item you're looking for.\\n        \")])]):_vm._e()]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-1\"},[_c('div',{staticClass:\"image\"})])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue, Component, Watch } from 'vue-property-decorator';\nimport ListingItem from '@/interfaces/ListingItem';\nimport axios from 'axios';\nimport LButton from '@/components/shared/LButton.vue';\n\n@Component({\n  components: {\n    LButton,\n  },\n})\nexport default class Listing extends Vue {\n\n  private listingObj!: ListingItem;\n  private isLoading = true;\n  private listingExists = false;\n  private isBorrowing = false;\n  private borrowError = false;\n\n  created() {\n    axios.get('https://borrowing-svc-api.appspot.com/item/view?id=' + this.$route.params.id)\n      .then((res) => {\n        if (res.data.name) {\n          const {\n            name, ownerUsername, description, zipCode, isReserved, ownerId,\n          } = res.data;\n          this.listingObj = {\n            name,\n            ownerUsername,\n            ownerId,\n            description,\n            zipCode,\n            isReserved: isReserved === 0 ? false : true,\n          };\n          this.listingExists = true;\n        } else {\n          this.listingExists = false;\n        }\n      }).catch((err) => {\n        this.listingExists = false;\n      }).finally(() => {\n        this.isLoading = false;\n      });\n  }\n\n  @Watch ('$route')\n  onRouteChange() {\n    axios.get('https://borrowing-svc-api.appspot.com/item/view?id=' + this.$route.params.id)\n      .then((res) => {\n        if (res.data.name) {\n          const {\n            name, ownerUsername, description, zipCode, isReserved, ownerId,\n          } = res.data;\n          this.listingObj = {\n            name,\n            ownerUsername,\n            ownerId,\n            description,\n            zipCode,\n            isReserved: isReserved === 0 ? false : true,\n          };\n          this.listingExists = true;\n        } else {\n          this.listingExists = false;\n        }\n      }).catch((err) => {\n        this.listingExists = false;\n      }).finally(() => {\n        this.isLoading = false;\n      });\n  }\n\n  borrow() {\n    this.borrowError = false;\n    const payload = {\n      itemId: this.$route.params.id,\n    };\n    const headers = {\n      Authorization: this.$cookies.get('token'),\n    }\n    this.isBorrowing = true;\n    axios.post('https://borrowing-svc-api.appspot.com/item/borrow', payload, { headers })\n      .then((res) => {\n        console.log(res);\n      }).catch((err) => {\n        this.borrowError = true;\n      }).finally(() => {\n        this.isBorrowing = false;\n      })\n  }\n\n\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Listing.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Listing.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Listing.vue?vue&type=template&id=7bb49081&scoped=true&\"\nimport script from \"./Listing.vue?vue&type=script&lang=ts&\"\nexport * from \"./Listing.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Listing.vue?vue&type=style&index=0&id=7bb49081&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7bb49081\",\n  null\n  \n)\n\ncomponent.options.__file = \"Listing.vue\"\nexport default component.exports"],"sourceRoot":""}